---
import PageLayout from '@/layouts/PageLayout.astro';
import Hero from '@/components/astro/Hero.astro';
import Container from '@/components/astro/Container.astro';
import CardGrid from '@/components/astro/CardGrid.astro';
import SectionHeading from '@/components/astro/SectionHeading.astro';
import ArrowLink from '@/components/astro/ArrowLink.astro';
import { fetchAPI } from '@/lib/datocms';
import { HOME_PAGE_QUERY } from '@/graphql/index';

const data = await fetchAPI(HOME_PAGE_QUERY);
const projects = data.allProjects?.slice(0, 3) ?? [];
const articles = data.allArticles?.slice(0, 3) ?? [];
---

<PageLayout title="Adithya NR | A UX Engineer based in Bengaluru, India.">
  <Hero />

  <!-- Recent Work -->
  <Container>
    <SectionHeading class="mt-24 xl:mt-32 mb-8">Selected work</SectionHeading>
    <CardGrid items={projects} type="project" />
    <ArrowLink href="/work" text="View all projects" />
  </Container>

  <!-- Featured Articles -->
  <Container>
    <SectionHeading class="mt-28 xl:mt-36 mb-8">Writing</SectionHeading>
    <CardGrid items={articles} type="article" />
    <ArrowLink href="/blog" text="Read more articles" />
  </Container>

  <!-- CTA -->
  <Container>
    <div class="relative mt-28 xl:mt-36 mb-20 py-16 px-8 md:px-16 rounded-2xl bg-[var(--bg-elevated)] border border-[var(--border)] overflow-hidden" data-animate>
      <!-- Subtle accent glow -->
      <div class="orb orb-orange w-[300px] h-[300px] -bottom-20 -right-20 absolute opacity-50"></div>
      <h2 class="font-display text-3xl sm:text-4xl md:text-5xl tracking-tight leading-tight relative z-10">
        Got something in mind?
      </h2>
      <p class="font-body text-lg text-[var(--text-secondary)] mt-4 relative z-10 max-w-md">
        Whether it's a project, a question, or just to say hello â€”
      </p>
      <a href="/contact" class="btn-primary mt-8 relative z-10">Let's talk</a>
    </div>
  </Container>
</PageLayout>
