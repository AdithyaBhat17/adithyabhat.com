import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as c}from"./index.DYrVU9rO.js";function p({item:t,onClose:o,onPrev:i,onNext:a,counter:l}){const d=c.useCallback(n=>{n.key==="Escape"&&o(),n.key==="ArrowLeft"&&i&&i(),n.key==="ArrowRight"&&a&&a()},[o,i,a]);c.useEffect(()=>(document.addEventListener("keydown",d),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",d),document.body.style.overflow=""}),[d]);const h=new Intl.DateTimeFormat("en-US",{month:"long",year:"numeric"}).format(new Date(t.date));return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-md",role:"dialog","aria-modal":"true","aria-label":t.city,style:{animation:"dialogIn 0.25s ease"},children:[e.jsx("div",{className:"absolute inset-0",onClick:o}),e.jsxs("div",{className:"absolute top-0 left-0 right-0 z-20 flex items-center justify-between px-5 py-4",children:[e.jsx("span",{className:"font-mono text-xs text-white/40",children:l}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"font-display text-sm font-semibold text-white tracking-tight",children:t.city}),e.jsxs("p",{className:"text-[11px] text-white/40 font-body",children:[t.district," Â· ",h]})]}),e.jsx("button",{className:"w-9 h-9 flex items-center justify-center rounded-full bg-white/10 hover:bg-white/20 transition-colors text-white","aria-label":"Close",onClick:o,children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),i&&e.jsx("button",{onClick:n=>{n.stopPropagation(),i()},className:"absolute left-4 top-1/2 -translate-y-1/2 z-20 w-10 h-10 rounded-full bg-white/10 hover:bg-white/20 transition-colors flex items-center justify-center text-white","aria-label":"Previous photo",children:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"15 18 9 12 15 6"})})}),a&&e.jsx("button",{onClick:n=>{n.stopPropagation(),a()},className:"absolute right-4 top-1/2 -translate-y-1/2 z-20 w-10 h-10 rounded-full bg-white/10 hover:bg-white/20 transition-colors flex items-center justify-center text-white","aria-label":"Next photo",children:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"9 18 15 12 9 6"})})}),e.jsx("img",{src:t.photo.responsiveImage.src,alt:t.photo.responsiveImage.alt||t.city,className:"relative z-10 object-contain max-w-[90vw] max-h-[82vh] cursor-zoom-in select-none",onClick:()=>window.open(t.photo.responsiveImage.src,"_blank","noopener,noreferrer"),draggable:!1,style:{animation:"imgIn 0.3s ease"}}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 z-20 flex items-center justify-center gap-6 px-5 py-4",children:[e.jsx("span",{className:"text-[11px] text-white/30 font-body",children:t.camera}),e.jsx("span",{className:"text-[11px] text-white/30 font-body",children:t.distance}),e.jsxs("a",{href:t.location,target:"_blank",rel:"noopener noreferrer",className:"text-[11px] text-white/50 hover:text-white/80 font-body transition-colors flex items-center gap-1",children:["View on map",e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]}),e.jsx("style",{children:`
        @keyframes dialogIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes imgIn {
          from { opacity: 0; transform: scale(0.97); }
          to { opacity: 1; transform: scale(1); }
        }
      `})]})}function f({places:t}){const o=c.useMemo(()=>t.flatMap(s=>(s.photos??[]).map(x=>({city:s.city,location:s.location,date:s.date,state:s.state,district:s.district,distance:s.distance,camera:s.camera,photo:x}))).sort((s,x)=>new Date(x.date)>new Date(s.date)?1:-1),[t]),[i,a]=c.useState(null),[l,d]=c.useState(-1),h=c.useCallback((r,s)=>{a(r),d(s)},[]),n=c.useCallback(r=>{const s=l+r;s>=0&&s<o.length&&(a(o[s]),d(s))},[l,o]);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"columns-1 sm:columns-2 lg:columns-4 gap-3",children:o.map((r,s)=>e.jsx(u,{item:r,index:s,onOpen:()=>h(r,s)},r.photo.responsiveImage.src))}),i&&e.jsx(p,{item:i,onClose:()=>{a(null),d(-1)},onPrev:l>0?()=>n(-1):void 0,onNext:l<o.length-1?()=>n(1):void 0,counter:`${l+1} / ${o.length}`})]})}function u({item:t,index:o,onOpen:i}){const a=c.useRef(null),[l,d]=c.useState(!1);c.useEffect(()=>{const n=a.current;if(!n)return;const r=new IntersectionObserver(([s])=>{s.isIntersecting&&(d(!0),r.disconnect())},{threshold:.1});return r.observe(n),()=>r.disconnect()},[]);const h=new Intl.DateTimeFormat("en-US",{month:"short",year:"numeric"}).format(new Date(t.date));return e.jsxs("div",{ref:a,className:"mb-3 break-inside-avoid cursor-zoom-in group relative overflow-hidden rounded-lg",onClick:i,style:{opacity:l?1:0,transform:l?"translateY(0)":"translateY(20px)",transition:`opacity 0.5s ease ${o%8*.06}s, transform 0.5s ease ${o%8*.06}s`},children:[e.jsx("img",{src:t.photo.responsiveImage.src,srcSet:t.photo.responsiveImage.srcSet,sizes:t.photo.responsiveImage.sizes,width:t.photo.responsiveImage.width,height:t.photo.responsiveImage.height,alt:t.photo.responsiveImage.alt||t.city,loading:"lazy",className:"w-full h-auto transition-transform duration-700 ease-out group-hover:scale-[1.06]",style:t.photo.responsiveImage.base64?{backgroundImage:`url(${t.photo.responsiveImage.base64})`,backgroundSize:"cover"}:void 0}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 translate-y-2 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-300 ease-out",children:e.jsxs("div",{className:"flex items-end justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-display text-lg font-semibold tracking-tight leading-tight",children:t.city}),e.jsxs("p",{className:"text-white/60 text-xs font-body mt-0.5",children:[t.district,", ",t.state]})]}),e.jsx("span",{className:"text-white/40 text-[10px] font-mono whitespace-nowrap",children:h})]})}),e.jsx("div",{className:"absolute top-3 right-3 w-8 h-8 rounded-full bg-black/40 backdrop-blur-sm flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"11",cy:"11",r:"7"}),e.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}),e.jsx("line",{x1:"11",y1:"8",x2:"11",y2:"14"}),e.jsx("line",{x1:"8",y1:"11",x2:"14",y2:"11"})]})})]})}export{f as default};
